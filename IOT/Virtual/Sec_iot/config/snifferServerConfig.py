import configparser
import json
import sys

def main():
    configArray=[]

    print("Server Sniffer Configuration File.\nServer IPv4 address [DEFAULT: 127.0.0.1]):")
    addr = input()
    if not addr:
        configArray.append("127.0.0.1")
    else:
        configArray.append(addr)

    print("Server port [DEFAULT: 6789]: ")
    port = input()
    if not port:
        configArray.append("6789")
    else:
        configArray.append(port)

    print("Path to server cryptography keys [DEFAULT: NONE]: ")
    keysPath = input()
    if not keysPath: 
        configArray.append("NONE")
        config_default(configArray)
    else:
        configArray.append(keysPath)
        config_default(configArray)


def config_default(config): 

    if len(config) < 3:
    
        config = configparser.ConfigParser()
        config['DEFAULT'] = { 'Host': config[1],
                            'Port': config[2]
        }
    else:
        config = configparser.ConfigParser()
        config['User Config'] = { 'Host': config[1],
                                'Port': config[2],
                                'Keys': config[3]
        }

    with open('./snifferServerConfig','w') as configFile:
        config.write(configFile)

main()