#!/usr/bin/env python
# -*- coding: utf-8 -*-

import sys
import os
import time




def progress_bar():
    toolbar_width = 20
    sys.stdout.write("[%s]" % (" " * toolbar_width))
    sys.stdout.flush()
    sys.stdout.write("\b" * (toolbar_width+1)) 

    for i in xrange(toolbar_width):
        time.sleep(0.1)
        sys.stdout.write("-")
        sys.stdout.flush()

    sys.stdout.write("\n")



print "\n+----------------------------------------------------------------+"
print "|Coded by Bruno V, Ant√¥nio, Daniel G.                            |"
print "|Repo: https://github.com/IEEE-ComSoc-UnB/PENTEST_PROJECT        |"
print "+----------------------------------------------------------------+\n"

if(len(sys.argv) < 3 ):
    print "Usage:\n\n\t python " + sys.argv[0] + " [path/destination_file.txt] [SSID]\n\n"
    sys.exit()


output_file_name = sys.argv[1]
ssid = sys.argv[2]

if(os.name == 'nt'):
    "Windows is not supported!\n\n"
    sys.exit()

command = "iwlist wlp3s0 scanning | egrep '(.*)' >> temp.txt" 
os.system(command)

content = ''
with open( "temp.txt",'r') as content_file:
    content = content_file.read()
    content_file.close()

content.replace("\"","").replace("/","-")

list_of_cells = content.split("Cell")


unb_cells = []

for cell in list_of_cells:


    if( ssid in cell):
        unb_cells.append(cell)

filepath = os.path.join('Data', output_file_name)
new_file = open(filepath,'a')

for cell in unb_cells:
    cell += "\n"
    new_file.write(cell)

new_file.close()
os.remove("temp.txt")

progress_bar()

print "Arquivo criado com sucesso."


